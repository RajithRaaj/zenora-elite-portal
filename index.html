<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite SpaceCard 3.0</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.11.0/lottie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        :root {
            --card-width: 340px;
            --card-height: 550px; /* Adjusted for more vertical space */
            --dark-bg: #0d1117;
            --dark-card-bg: rgba(22, 27, 34, 0.7);
            --dark-border: rgba(50, 100, 150, 0.4);
            --dark-text: #e6edf3;
            --dark-neon-glow: #0ff;
            /* Cyan */
            --light-bg: #f0f2f5;
            --light-card-bg: rgba(255, 255, 255, 0.8);
            --light-border: rgba(150, 150, 150, 0.3);
            --light-text: #1a202c;
            --light-neon-glow: #f0f;
            /* Magenta */
        }
        /* Ensure html and body take full height to cover browser UI elements */
        html {
            height: 100%;
        }
        body {
            height: 100%;
            /* Ensure body also takes full height */
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--dark-bg);
            color: var(--dark-text);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            /* Changed to flex-start to align items to the top */
            padding-top: 5vh;
            /* Added padding to lift the card from the top */
            min-height: 100vh;
            /* Keep min-height for content, but allow body to stretch fully */
            overflow-y: auto;
            /* Allow vertical scrolling if content overflows, safer for mobile */
            overflow-x: hidden;
            /* Prevent horizontal scrolling */
            perspective: 1000px;
            /* For 3D transformations */
            position: relative;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        body.light-theme {
            background-color: var(--light-bg);
            color: var(--light-text);
        }
        /* Particle background */
        .particle-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
            /* Behind other content */
        }
        .particle {
            position: absolute;
            background-color: rgba(100, 200, 255, 0.7);
            border-radius: 50%;
            opacity: 0;
            animation: particle-fade-in-out 10s infinite;
            filter: blur(1px);
        }
        @keyframes particle-fade-in-out {
            0% {
                opacity: 0;
                transform: translate(var(--x, 0), var(--y, 0)) scale(0.5);
            }
            50% {
                opacity: 0.8;
                transform: translate(var(--x, 0), var(--y, 0)) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x, 0), var(--y, 0)) scale(0.5);
            }
        }
        /* Card container for 3D flip and tilt */
        .card-container {
            width: var(--card-width);
            height: var(--card-height);
            position: relative;
            transform-style: preserve-3d;
            /* Updated transition for a more 'amazing' flip effect */
            transition: transform 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Ease-out-back for overshoot */
            z-index: 10;
        }
        .card {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            border-radius: 2rem;
            /* More rounded */
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            /* Stronger shadow */
            transition: background-color 0.5s ease, border-color 0.5s ease;
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--dark-card-bg);
            border: 2px solid var(--dark-border);
            border-radius: 2rem;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            color: var(--dark-text);
            overflow: hidden;
            /* Ensure Lottie doesn't overflow */
        }
        body.light-theme .card-front,
        body.light-theme .card-back {
            background: var(--light-card-bg);
            border: 2px solid var(--light-border);
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .card-container.flipped .card-front {
            transform: rotateY(-180deg);
        }
        .card-container.flipped .card-back {
            transform: rotateY(0deg);
        }
        /* Lottie Animation in Background */
        #lottie-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.2;
            /* Subtle */
            pointer-events: none;
        }
        /* Gradient Border Trail/Pulse */
        .card::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #00ffff);
            background-size: 400% 400%;
            border-radius: 2.2rem;
            /* Slightly larger than card border-radius */
            z-index: -2;
            animation: gradient-pulse 4s ease infinite;
            filter: blur(10px);
        }
        @keyframes gradient-pulse {
            0% { background-position: 0% 50%;
            opacity: 0.7; }
            50% { background-position: 100% 50%;
            opacity: 1; }
            100% { background-position: 0% 50%;
            opacity: 0.7; }
        }
        /* Profile details */
        .profile-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--dark-neon-glow);
            object-fit: cover;
            box-shadow: 0 0 15px var(--dark-neon-glow);
            transition: border-color 0.5s ease, box-shadow 0.5s ease;
        }
        body.light-theme .profile-img {
            border: 3px solid var(--light-neon-glow);
            box-shadow: 0 0 15px var(--light-neon-glow);
        }
        .name {
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        .tagline {
            font-size: 1.2rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.7);
        }
        body.light-theme .tagline {
            color: rgba(0, 0, 0, 0.6);
        }
        .micro-stats span {
            font-size: 0.9rem;
            background: rgba(0, 255, 255, 0.1);
            padding: 0.3rem 0.6rem;
            border-radius: 0.5rem;
            margin: 0 0.2rem;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        body.light-theme .micro-stats span {
            background: rgba(255, 0, 255, 0.1);
            border: 1px solid rgba(255, 0, 255, 0.3);
        }
        /* Social Icons & Buttons */
        .social-icons a, .action-button {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .social-icons a:hover, .action-button:hover {
            color: var(--dark-neon-glow);
            text-shadow: 0 0 10px var(--dark-neon-glow);
        }
        body.light-theme .social-icons a:hover, body.light-theme .action-button:hover {
            color: var(--light-neon-glow);
            text-shadow: 0 0 10px var(--light-neon-glow);
        }
        .social-icons a::before, .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        .social-icons a:hover::before, .action-button:hover::before {
            left: 100%;
        }
        .action-button {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.5);
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        body.light-theme .action-button {
            background: rgba(255, 0, 255, 0.2);
            border: 1px solid rgba(255, 0, 255, 0.5);
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
        }
        .action-button:hover {
            background: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
        }
        body.light-theme .action-button:hover {
            background: rgba(255, 0, 255, 0.4);
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.6);
        }
        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            padding: 0.75rem;
            cursor: pointer;
            z-index: 20;
            transition: background 0.3s ease;
        }
        body.light-theme .theme-toggle {
            background: rgba(0, 0, 0, 0.1);
        }
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        body.light-theme .theme-toggle:hover {
            background: rgba(0, 0, 0, 0.2);
        }
        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 0.4rem 0.8rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 50;
        }
        .social-icons a:hover .tooltip {
            opacity: 1;
            transform: translateY(0);
        }
        /* Toast Message */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 255, 255, 0.7);
            color: #0d1117;
            padding: 0.8rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease, transform 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }
        body.light-theme .loading-overlay {
            background: var(--light-bg);
        }
        .loader {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(0, 255, 255, 0.2);
            border-top: 8px solid var(--dark-neon-glow);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        body.light-theme .loader {
            border: 8px solid rgba(255, 0, 255, 0.2);
            border-top: 8px solid var(--light-neon-glow);
        }
        @keyframes spin {
            0% { transform: rotate(0deg);
            }
            100% { transform: rotate(360deg);
            }
        }
        /* Responsive Adjustments */
        @media (max-width: 640px) {
            :root {
                --card-width: 90vw;
                --card-height: 85vh; /* Larger on mobile for better touch */
            }
            body {
                padding: 1rem;
                /* Add some padding to prevent content from touching edges */
                padding-top: 2vh;
                /* Adjust padding-top for mobile to account for smaller screen */
            }
            .card-container {
                margin: 0;
                /* Remove margin as padding is added to body */
            }
            .theme-toggle {
                padding: 0.6rem;
                /* Slightly smaller padding for toggle buttons */
                top: 1rem;
                right: 1rem;
            }
            /* Ensure mode buttons wrap correctly */
            .profile-mode-switcher .flex {
                flex-direction: row;
                /* Ensure row direction even if wrapping */
                flex-wrap: wrap;
                /* Allow buttons to wrap to next line */
                justify-content: center;
                /* Center buttons when wrapped */
                gap: 0.5rem;
                /* Reduce gap slightly */
            }
            .profile-mode-switcher button {
                padding: 0.6rem 1rem;
                /* Adjust padding for smaller buttons */
                font-size: 0.8rem;
                /* Smaller font size */
            }
        }
        /* Styles for the back image */
        .back-profile-img {
            width: 120px; /* Adjust size as needed */
            height: 120px; /* Adjust size as needed */
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem; /* Space between image and QR code */
            border: 3px solid var(--dark-neon-glow);
            box-shadow: 0 0 15px var(--dark-neon-glow);
        }
        body.light-theme .back-profile-img {
            border: 3px solid var(--light-neon-glow);
            box-shadow: 0 0 15px var(--light-neon-glow);
        }
        /* Watermark */
        .card-footer-watermark {
            position: absolute;
            bottom: 0.75rem; /* Adjusted to be closer to the bottom */
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 15; /* Above other card content but below theme toggle */
        }
        /* About Me Section specific styles */
        #aboutSection {
            background: var(--dark-card-bg); /* Use card background for consistency */
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 2rem; /* Match card border-radius */
            text-align: left; /* Align text within about section */
            /* Flex properties applied in HTML */
            /* Ensure content within is scrollable */
        }
        #aboutSection.show {
            opacity: 1;
            pointer-events: auto;
        }
        /* Custom scrollbar for about text */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--dark-neon-glow);
            border-radius: 10px;
        }
        body.light-theme .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--light-neon-glow);
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
    </div>
    <div class="particle-bg" id="particleBg"></div>
    <div class="card-container" id="cardContainer">
        <div class="card card-front" id="cardFront">
            <button id="themeToggle" class="theme-toggle">
                <i class="fas fa-moon text-xl text-white"></i>
            </button>
            <div id="lottie-background"></div>
            <div class="flex flex-col items-center gap-2">
                <img src="https://i.ibb.co/j9HXgSHp/logo-img.png" alt="Profile Picture" class="profile-img" id="profileImage">
                <h1 class="name" id="profileName">Soundhar</h1>
                <p class="tagline" id="profileTagline">Visionary Founder | AI Pioneer</p>
                <div class="micro-stats flex justify-center gap-2">
                    <span>3 Startups</span>
                    <span>2 Exits</span>
                    <span>AI Strategist</span>
                </div>
            </div>
            <div class="flex flex-col items-center gap-2 w-full flex-grow">
                <div class="contact-info text-center">
                    <p class="text-lg"><i class="fas fa-phone mr-2"></i> <span id="phoneNumber" class="cursor-pointer hover:underline"> +91 93846 64484</span></p>
                    <p class="text-lg mt-2"><i class="fas fa-envelope mr-2"></i> <span id="emailAddress" class="cursor-pointer hover:underline"> contact@rajithraaj.com</span></p>
                </div>
                <div class="social-icons flex gap-6 text-3xl mt-2">
                    </div>
                <div class="action-buttons flex flex-wrap justify-center gap-4 w-full px-4 mt-2">
                    <button class="action-button" id="addToContacts"><i class="fas fa-address-book"></i> Add to Contacts</button>
                    <button class="action-button" id="shareCard"><i class="fas fa-share-alt"></i> Share Card</button>
                </div>
            </div>
            <p class="text-xs text-gray-500 card-footer-watermark">
                <a href="https://zenora-ai.vercel.app/" target="_blank" rel="noopener noreferrer" class="hover:underline">ZENORA AI © All Rights Reserved</a>
            </p>
        </div>
        <div class="card card-back" id="cardBack">
            <h2 class="text-3xl font-bold mb-6 mt-4">Connect with me!</h2>
            <img src="https://i.ibb.co/rXyYzQW/soundhar-img.png" alt="Soundhar" class="back-profile-img">
            <div class="flex flex-col items-center gap-4 mt-6" id="backMainContent">
                <button class="action-button" id="aboutMeButton"><i class="fas fa-info-circle"></i> About Me</button>
                <button class="action-button" id="copyEmailBack"><i class="fas fa-envelope"></i> Copy Email</button>
                <button class="action-button" id="copyPhoneBack"><i class="fas fa-phone"></i> Copy Phone</button>
                <div class="profile-mode-switcher flex flex-col items-center gap-3 mt-4">
                    <p class="text-sm text-gray-400">Switch Mode:</p>
                    <div class="flex flex-wrap justify-center gap-2">
                        <button class="action-button text-sm px-3 py-1.5" data-mode="Founder">Founder</button>
                        <button class="action-button text-sm px-3 py-1.5" data-mode="Carrywings Logistics">Carrywings Logistics</button>
                        <button class="action-button text-sm px-3 py-1.5" data-mode="Carrywings Technologies">Carrywings Technologies</button>
                    </div>
                </div>
            </div>
            <p class="text-xs text-gray-500 card-footer-watermark">
                Elite SpaceCard 3.0 | <a href="https://zenora-ai.vercel.app/" target="_blank" rel="noopener noreferrer" class="hover:underline">ZENORA AI ©</a>
            </p>

            <div id="aboutSection" class="absolute inset-0 flex flex-col justify-between p-6 opacity-0 pointer-events-none transition-opacity duration-300">
                <button id="backToMainBack" class="absolute top-4 left-4 text-xl text-gray-300 hover:text-white focus:outline-none z-30">
                    <i class="fas fa-arrow-left mr-2"></i> Back
                </button>
                <h3 class="text-2xl font-bold text-center mb-4 mt-12">About Carrywings</h3>
                <p class="text-base text-gray-300 text-center flex-grow overflow-y-auto custom-scrollbar leading-relaxed">
                    At Carrywings we boast experience and expertise in global logistics management services. Our clients can selectively or completely outsource the management and transportation of raw materials & finished goods in India as well as the overseas markets. This is complemented by our IT expertise, knowledge of systems and an ability to deliver precisely the right solution to custom set of requirements. Carrywings team is comprised of experts in supply chain and logistics management, commercial carrier management, logistics operations and execution and supply chain technology.
                </p>
                <p class="text-xs text-gray-500 card-footer-watermark">
                    Elite SpaceCard 3.0 | <a href="https://zenora-ai.vercel.app/" target="_blank" rel="noopener noreferrer" class="hover:underline">ZENORA AI ©</a>
                </p>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>
    <script>
        // --- Configuration & Data ---
        const profileData = {
            Founder: {
                name: "Soundhar",
                tagline: "Visionary Founder | AI Pioneer",
                phoneNumber: "+91 9384664484", // Updated: Personal
                emailAddress: "contact@rajithraaj.com",
                microStats: ["3 Startups", "2 Exits", "AI Strategist"],
                social: {
                    linkedin: "https://linkedin.com/in/rajithraaj", // Assuming personal LinkedIn
                    instagram: "https://instagram.com/rajithraaj",
                    whatsapp: "https://wa.link/d13a9v",
                    facebook: "https://www.facebook.com/carrywings" // Assuming this is for Carrywings general
                }
            },
            "Carrywings Logistics": {
                name: "Soundhar",
                tagline: "Director, Carrywings Logistics | Global Supply Chain Expert",
                phoneNumber: "+91 9840028788", // Updated: Work
                emailAddress: "soundhar@carrywings.com", // Updated: Work
                microStats: ["Global Logistics", "Freight Management", "Supply Chain Optimization"],
                social: {
                    website: "https://carrywings.com/",
                    linkedin: "https://linkedin.com/in/rajithraaj", // Assuming personal LinkedIn
                    whatsapp: "https://wa.link/d13a9v",
                    facebook: "https://www.facebook.com/carrywings",
                    instagram: "https://www.instagram.com/carrywings_lines/"
                }
            },
            "Carrywings Technologies": {
                name: "Soundhar",
                tagline: "Lead Architect, Carrywings Technologies | AI & Web Solutions",
                phoneNumber: "+91 9840028788", // Updated: Work
                emailAddress: "soundhar@carrywings.com", // Updated: Work
                microStats: ["AI Development", "Web Solutions", "Innovation"],
                social: {
                    website: "https://carrywings-technologies.vercel.app/",
                    linkedin: "https://linkedin.com/in/rajithraaj", // Assuming personal LinkedIn
                    whatsapp: "https://wa.link/d13a9v",
                    facebook: "https://www.facebook.com/carrywings", // Assuming this is for Carrywings general
                    instagram: "https://www.instagram.com/carrywings_lines/" // Assuming this is for Carrywings general
                }
            }
        };
        let currentMode = 'Founder'; // Default mode
        let isFlipped = false;
        // --- DOM Elements ---
        const loadingOverlay = document.getElementById('loadingOverlay');
        const cardContainer = document.getElementById('cardContainer');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const themeToggle = document.getElementById('themeToggle');
        const toast = document.getElementById('toast');
        // Profile details
        const profileImage = document.getElementById('profileImage');
        const profileName = document.getElementById('profileName');
        const profileTagline = document.getElementById('profileTagline');
        const phoneNumberSpan = document.getElementById('phoneNumber');
        const emailAddressSpan = document.getElementById('emailAddress');
        const microStatsContainer = document.querySelector('.micro-stats');
        // Action Buttons (Front)
        const addToContactsBtn = document.getElementById('addToContacts');
        const shareCardBtn = document.getElementById('shareCard');
        // Action Buttons (Back)
        const copyEmailBackBtn = document.getElementById('copyEmailBack');
        const copyPhoneBackBtn = document.getElementById('copyPhoneBack');
        const profileModeButtons = document.querySelectorAll('.profile-mode-switcher button');
        const socialIconsContainer = document.querySelector('.social-icons');

        // About Me Section DOM elements
        const aboutMeButton = document.getElementById('aboutMeButton');
        const aboutSection = document.getElementById('aboutSection');
        const backToMainBack = document.getElementById('backToMainBack');
        const backMainContent = document.getElementById('backMainContent'); // The wrapper for original content

        // --- Utility Functions ---
        // Show Toast Notification
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
            triggerHapticFeedback();
        }
        // Trigger Haptic Feedback (Vibration API)
        function triggerHapticFeedback() {
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(50);
                // Vibrate for 50ms
            }
        }
        // Copy to Clipboard
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            try {
                document.execCommand('copy');
                showToast("Copied!");
            } catch (err) {
                console.error('Failed to copy: ', err);
                showToast("Failed to copy.");
            }
            document.body.removeChild(textarea);
        }
        // --- Core Logic ---
        // Update Card Content based on Mode
        function updateCardContent(mode) {
            const data = profileData[mode];
            if (!data) return;
            profileName.textContent = data.name;
            profileTagline.textContent = data.tagline;
            phoneNumberSpan.textContent = data.phoneNumber;
            emailAddressSpan.textContent = data.emailAddress;
            // Update Micro Stats
            microStatsContainer.innerHTML = '';
            data.microStats.forEach(stat => {
                const span = document.createElement('span');
                span.textContent = stat;
                microStatsContainer.appendChild(span);
            });
            // Update Social Links
            socialIconsContainer.innerHTML = ''; // Clear existing icons

            if (data.social.facebook) {
                socialIconsContainer.innerHTML += `
                    <a href="${data.social.facebook}" target="_blank" rel="noopener noreferrer" class="relative group">
                        <i class="fab fa-facebook"></i>
                        <span class="tooltip absolute top-full left-1/2 -translate-x-1/2 mt-2 group-hover:opacity-100 group-hover:translate-y-0">Facebook</span>
                    </a>
                `;
            }
            if (data.social.instagram) {
                socialIconsContainer.innerHTML += `
                    <a href="${data.social.instagram}" target="_blank" rel="noopener noreferrer" class="relative group">
                        <i class="fab fa-instagram"></i>
                        <span class="tooltip absolute top-full left-1/2 -translate-x-1/2 mt-2 group-hover:opacity-100 group-hover:translate-y-0">Instagram</span>
                    </a>
                `;
            }
            if (data.social.linkedin) {
                socialIconsContainer.innerHTML += `
                    <a href="${data.social.linkedin}" target="_blank" rel="noopener noreferrer" class="relative group">
                        <i class="fab fa-linkedin"></i>
                        <span class="tooltip absolute top-full left-1/2 -translate-x-1/2 mt-2 group-hover:opacity-100 group-hover:translate-y-0">LinkedIn</span>
                    </a>
                `;
            }
            if (data.social.whatsapp) {
                socialIconsContainer.innerHTML += `
                    <a href="${data.social.whatsapp}" target="_blank" rel="noopener noreferrer" class="relative group">
                        <i class="fab fa-whatsapp"></i>
                        <span class="tooltip absolute top-full left-1/2 -translate-x-1/2 mt-2 group-hover:opacity-100 group-hover:translate-y-0">WhatsApp</span>
                    </a>
                `;
            }
             if (data.social.website) {
                socialIconsContainer.innerHTML += `
                    <a href="${data.social.website}" target="_blank" rel="noopener noreferrer" class="relative group">
                        <i class="fas fa-globe"></i>
                        <span class="tooltip absolute top-full left-1/2 -translate-x-1/2 mt-2 group-hover:opacity-100 group-hover:translate-y-0">Website</span>
                    </a>
                `;
            }

            currentMode = mode;
            showToast(`Switched to ${mode} mode!`);
            // Update active state for mode buttons
            profileModeButtons.forEach(button => {
                if (button.dataset.mode === mode) {
                    button.classList.add('border-b-2', 'border-blue-400');
                    button.classList.remove('border-transparent');
                } else {
                    button.classList.remove('border-b-2', 'border-blue-400');
                    button.classList.add('border-transparent');
                }
            });
        }
        // Card Flip Logic
        function flipCard() {
            isFlipped = !isFlipped;
            if (isFlipped) {
                cardContainer.classList.add('flipped');
            } else {
                cardContainer.classList.remove('flipped');
            }
            triggerHapticFeedback();
        }
        // --- Visual Effects & Animations ---
        // Particle Background Generation
        function createParticles() {
            const particleBg = document.getElementById('particleBg');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const size = Math.random() * 5 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.setProperty('--x', `${Math.random() * 100}vw`);
                particle.style.setProperty('--y', `${Math.random() * 100}vh`);
                particle.style.animationDelay = `${Math.random() * 10}s`;
                particleBg.appendChild(particle);
            }
        }
        // Lottie Animation
        function loadLottieAnimation() {
            lottie.loadAnimation({
                container: document.getElementById('lottie-background'),
                renderer: 'svg',
                loop: true,
                autoplay: true,
                path: 'https://assets5.lottiefiles.com/private_files/lf30_jkgk378g.json'
            });
        }
        // 3D Tilt Effect (using GSAP for smooth animation)
        function initTiltEffect() {
            const card = document.querySelector('.card-container');
            const sensitivity = 0.05; // Base sensitivity for mouse
            // Mouse move for desktop
            document.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const rotateX = (e.clientY - centerY) * -sensitivity;
                const rotateY = (e.clientX - centerX) * sensitivity;
                gsap.to(card, {
                    rotationX: rotateX,
                    rotationY: rotateY,
                    ease: "power2.out",
                    duration: 0.5
                });
            });
            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    rotationX: 0,
                    rotationY: 0,
                    ease: "elastic.out(1, 0.3)",
                    duration: 1.5
                });
            });
            // Device Orientation for mobile (Gyroscope)
            if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', function(event) {
                    // event.gamma: left-right tilt (Y-axis rotation) range -90 to 90
                    // event.beta: front-back tilt (X-axis rotation) range -180 to 180
                    // Adjust multipliers to make the effect more visible
                    const tiltX = (event.beta / 90) * 20;  // Increased from 10 to 20 for more noticeable tilt
                    const tiltY = (event.gamma / 90) * 20; // Increased from 10 to 20 for more noticeable tilt
                    gsap.to(card, {
                        rotationX: tiltX,
                        rotationY: tiltY,
                        ease: "power1.out",
                        duration: 0.5
                    });
                });
            }
        }
        // --- Event Listeners ---
        // Initial loading sequence
        window.addEventListener('load', () => {
            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => loadingOverlay.style.display = 'none', 500);
            }, 1000);
        });
        // Theme Toggle
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            const isLight = document.body.classList.contains('light-theme');
            themeToggle.innerHTML = `<i class="fas ${isLight ? 'fa-sun' : 'fa-moon'} text-xl text-white"></i>`;
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });
        // Card Flip on Click/Tap
        cardContainer.addEventListener('click', (e) => {
            const interactiveElements = ['A', 'BUTTON', 'INPUT', 'SPAN', 'P', 'IMG']; // Added IMG to prevent flipping when clicking images
            if (e.target.closest(interactiveElements.map(tag => tag.toLowerCase()).join(','))) {
                return;
            }
            flipCard();
        });
        // Swipe Gestures for Flip
        let touchStartX = 0;
        cardContainer.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        }, { passive: true });
        cardContainer.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const deltaX = touchEndX - touchStartX;
            if (Math.abs(deltaX) > 75) {
                flipCard();
            }
        });
        // Tap-to-copy for Phone/Email
        phoneNumberSpan.addEventListener('click', () => copyToClipboard(phoneNumberSpan.textContent.trim()));
        emailAddressSpan.addEventListener('click', () => copyToClipboard(emailAddressSpan.textContent.trim()));
        copyEmailBackBtn.addEventListener('click', () => copyToClipboard(emailAddressSpan.textContent.trim()));
        copyPhoneBackBtn.addEventListener('click', () => copyToClipboard(phoneNumberSpan.textContent.trim()));
        // Save as VCF (Add to Contacts)
        addToContactsBtn.addEventListener('click', () => {
            const data = profileData[currentMode];
            const vCardContent = `BEGIN:VCARD
VERSION:3.0
FN:${data.name}
TEL:${data.phoneNumber}
EMAIL:${data.emailAddress}
END:VCARD`;
            const blob = new Blob([vCardContent], { type: 'text/vcard' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${data.name.replace(/\s/g, '_')}_EliteSpaceCard.vcf`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast("Contact Saved!");
        });
        // Share Card (Web Share API / WhatsApp fallback)
        shareCardBtn.addEventListener('click', async () => {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: `Elite SpaceCard of ${profileData[currentMode].name}`,
                        text: `Check out my Elite SpaceCard: ${profileData[currentMode].name} - ${profileData[currentMode].tagline}`,
                        url: window.location.href
                    });
                    showToast("Card Shared Successfully!");
                } catch (error) {
                    console.error('Error sharing:', error);
                    showToast("Share failed or cancelled.");
                }
            } else {
                const text = `Hey, check out my Elite SpaceCard: ${window.location.href}`;
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
                window.open(whatsappUrl, '_blank');
                showToast("Opening WhatsApp for sharing...");
            }
            triggerHapticFeedback();
        });
        // Profile Mode Switcher
        profileModeButtons.forEach(button => {
            button.addEventListener('click', () => {
                updateCardContent(button.dataset.mode);
            });
        });

        // About Me Section Visibility Control
        aboutMeButton.addEventListener('click', () => {
            gsap.to(backMainContent, {opacity: 0, duration: 0.3, onComplete: () => {
                backMainContent.style.display = 'none';
                aboutSection.classList.add('show');
                gsap.fromTo(aboutSection, {opacity: 0}, {opacity: 1, duration: 0.3});
            }});
        });

        backToMainBack.addEventListener('click', () => {
            gsap.to(aboutSection, {opacity: 0, duration: 0.3, onComplete: () => {
                aboutSection.classList.remove('show');
                backMainContent.style.display = 'flex'; // Restore flex display
                gsap.fromTo(backMainContent, {opacity: 0}, {opacity: 1, duration: 0.3});
            }});
        });

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            loadLottieAnimation();
            initTiltEffect();
            // Apply saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                themeToggle.innerHTML = `<i class="fas fa-sun text-xl text-white"></i>`;
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                    document.body.classList.add('light-theme');
                    themeToggle.innerHTML = `<i class="fas fa-sun text-xl text-white"></i>`;
                }
            }
            // Initial content load
            updateCardContent(currentMode);
        });
    </script>
</body>
</html>
